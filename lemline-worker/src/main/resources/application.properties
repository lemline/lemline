# ---------------------------------------------------------------------
# Application configuration
# ---------------------------------------------------------------------
quarkus.application.name=workflow-runtime
quarkus.native.enabled=true
quarkus.package.jar.enabled=false
quarkus.native.additional-build-args=--initialize-at-run-time=io.netty.buffer.ByteBufUtil\\,io.netty.buffer.AbstractReferenceCountedByteBuf\\,com.github.f4b6a3.uuid
# Dev Services configuration
#quarkus.devservices.enabled=false
# ---------------------------------------------------------------------
# Logging configuration
# ---------------------------------------------------------------------
# Default log level
quarkus.log.level=WARN
# Set specific log levels for packages
quarkus.log.category."com.lemline".level=INFO
quarkus.log.category."com.lemline.worker".level=INFO
quarkus.log.category."com.lemline.core".level=WARN
# Console logging configuration
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%X{requestId},%X{workflowId},%X{correlationId}] [%c{2.}] (%t) %s%e%n
quarkus.console.color=true
# JSON logging for production environments
# Uncomment to enable JSON logging for better log analysis in production
#quarkus.log.handler.json=true
#quarkus.log.handler.json.date-format=yyyy-MM-dd HH:mm:ss.SSS
#quarkus.log.handler.json.pretty-print=false
#quarkus.log.handler.json.record-delimiter=\n
#quarkus.log.handler.json.exception-output-type=formatted
#quarkus.log.handler.json.additional-field.app-name.value=${quarkus.application.name}
#quarkus.log.handler.json.additional-field.env.value=production
# ---------------------------------------------------------------------
# Database configuration
# ---------------------------------------------------------------------
# Database selection (postgresql or mysql)
lemline.database.type=postgresql
# Default database configuration using PostgreSQL
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=postgres
quarkus.datasource.password=postgres
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/postgres
# MySQL configuration (disabled by default)
#quarkus.datasource.db-kind=mysql
#quarkus.datasource.username=mysql
#quarkus.datasource.password=mysql
#quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/lemline
# Hibernate configuration
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.bind-parameters=true
quarkus.hibernate-orm.packages=com.lemline.worker.models
# Flyway
quarkus.flyway.baseline-on-migrate=false
# Disable automatic migration at start - we'll handle this in FlywayConfig
quarkus.flyway.migrate-at-start=false
# The locations will be overridden by FlywayConfig based on database type
# quarkus.flyway.locations=classpath:db/migration/postgresql
# ---------------------------------------------------------------------
# Kafka configuration
# ---------------------------------------------------------------------
lemline.messaging.type=rabbitmq
quarkus.kafka.devservices.enabled=false
mp.messaging.incoming.workflows-in.connector=smallrye-kafka
mp.messaging.incoming.workflows-in.topic=workflows
mp.messaging.incoming.workflows-in.auto.offset.reset=earliest
mp.messaging.incoming.workflows-in.group.id=swruntime
mp.messaging.incoming.workflows-in.failure-strategy=dead-letter-queue
mp.messaging.incoming.workflows-in.dead-letter-queue.topic=workflows-dlq
mp.messaging.outgoing.workflows-out.connector=smallrye-kafka
mp.messaging.outgoing.workflows-out.topic=workflows
mp.messaging.outgoing.workflows-out.merge=true
# ---------------------------------------------------------------------
# Wait service configuration
# ---------------------------------------------------------------------
wait.outbox.batch-size=100
wait.outbox.max-attempts=5
wait.outbox.initial-delay-seconds=10
wait.outbox.schedule=5s
wait.cleanup.after-days=7
wait.cleanup.batch-size=500
wait.cleanup.schedule=1h
# ---------------------------------------------------------------------
# Retry service configuration
# ---------------------------------------------------------------------
retry.outbox.batch-size=100
retry.outbox.max-attempts=5
retry.outbox.initial-delay-seconds=10
retry.outbox.schedule=5s
retry.cleanup.after-days=7
retry.cleanup.batch-size=500
retry.cleanup.schedule=1h
# ---------------------------------------------------------------------
# Timeout service configuration
# ---------------------------------------------------------------------
timeout.outbox.batch-size=100
timeout.outbox.max-attempts=5
timeout.outbox.initial-delay-seconds=10
timeout.outbox.schedule=5s
timeout.cleanup.after-days=7
timeout.cleanup.batch-size=500
timeout.cleanup.schedule=1h
